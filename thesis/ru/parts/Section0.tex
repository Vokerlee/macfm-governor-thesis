\section{Введение}
\label{sec:Section0} \index{Section0}

    Для улучшения производительности компьютерных систем, а также для уменьшения энергопотребления
    этих систем, в различных операционных системах
    используют механизмы регулирования тактовых частот как центрального процессора (ЦП),
    так и прочих компонент (графический процессор, нейронный процессор, и т.д.). Такие механизмы
    оперируют с технологией DVFS (Dynamic Voltage-Frequency Scaling), которая позволяет изменять
    тактовую частоту электронной схемы (одновременно изменяя рабочее напряжение такой схемы).

    В операционной системе Linux (версии 6.1), представляющей собой монолитное ядро,
    тактовые частоты ядер процессора, как правило, регулируются посредством использования драйвера
    \textit{cpufreq}, предоставляющего API (Application Programming Interface) для этих целей, который
    необходимо реализовать вендору, выпускающему процессор. За тактовые частоты прочих компонент системы
    отвечает API для регистрации драйверов \textit{devfreq} (например, можно добавить возможность
    регулирования тактовой частоты шины,
    соединяющей соседние уровни кешей, или тактовой частоты оперативной памяти).

    На данный момент Linux использует политики регулирования тактовых частот ядер ЦП, которые
    не учитывают сложную схему взаимодействия ядер с прочими компонентами компьютерной системы,
    работающими при тактовой частоте, отличной от частоты ядер: кеши высоких уровней (кеш, системный кеш),
    оперативная память. В современных реалиях производительность ядер ЦП в основном ограничена
    производительностью компонент памяти (кеши процессора, оперативная память), взаимодействующих с этими
    ядрами, поэтому текущие политики регулирования тактовых частот в Linux не применимы в общем случае.

    Отсутствие учёта компонент памяти при регулировании тактовых частот ядер ЦП является
    критичным при выполнении приложений реального времени, такие как компьютерные игры и мессенджеры, где
    выставление неподходящих тактовых частот приводит к заметному замедлению приложения (деградации
    производительности) и/или к повышенному энергопотреблению, что негативно сказывается на
    опыт пользователя.

    Для учёта влияния внеядерных компонент на производительность ЦП необходимо построение
    модели производительности ядер ЦП, которое вызывает трудностей:
    \begin{enumerate}
        \item Необходимо априорное знание структуры компьютерной системы, на которой запущена
        операционная система, например, количество уровней кешей, их внутреннее устройство.
        \item Необходимо знать подробные характеристики блоков ядра ЦП, их внутреннее устройство, для
        учёта их доли влияния на конечную производительность самого ядра в целом.
        \item Необходимо измерить характеристики внеядерных компонент системы,
        например, зависимость латентность (задержки памяти) от уровня её утилизации (уровень
        нагрузки её пропускной способности), для учёта их доли влияния на конечную
        производительность ядра ЦП.
        \item Такую информацию, как утилизация оперативной памяти, или какие блоки ядра процессора
        были использованы за фиксированный промежуток времени, получить во время работы операционной
        системы, как правило, невозможно, поэтому требуется обходить использование такой информации
        в модели.
    \end{enumerate}

    % TODO: пересмотреть, убрать резы
    В данной работе в результате исследований предлагается модель производительности ядер ЦП и
    способ её применения, а также реализация политики регулирования тактовых частот ядер процессора.

    Архитектура ARM big.LITTLE, которая доминирует на рынке
    мобильных платформ на сегодняшний день, представляет собой концепцию, в которой одновременно
    используются различные типы ядер процессора (гетерогенная архитектура): ЦП разделяется на
    кластеры, часть которых состоит из более энергоэффективных, но менее производительных ядер,
    а другая часть состоит из производительных ядер, потребляющих значительно большее
    количество энергии. Параллельно с задачей регулирования тактовых частот
    процессорных ядер возникает задача выбора ядерного кластера в зависимости от требований и
    специфики выполняемой задачи, что так же требует создание модели производительности ядер ЦП,
    делая эту задачу наиболее актуальной.

    Для решения обозначенных задач удобно использовать симулятор компьютерных
    архитектур с открытым исходным кодом, например, Gem5, реализованный на языках программирования
    C++ и Python, который и будет использоваться в
    данной работе. Gem5 эмулирует поведение компьютерной системы, подобной реальной системе,
    включая поведение ядер процессора, поведение оперативной памяти, и т.д. Среди большого числа
    поддерживаемых архитектур в данной работы будет выбрана архитектура ARM64 (к которой относится
    ARM big.LITTLE), так как приложения реального времени чаще всего встречаются в мобильных устройствах,
    где эта архитектура доминирует по количеству устройств.

    % TODO: Remove results?

    Для возможности построения модели производительности ядер ЦП, а также для реализации политики
    регулирования тактовых частот в операционной системе Linux, запущенной режиме эмуляции с
    помощью Gem5, в данной работе дополнительно:
    \begin{enumerate}
        \item Реализованы \textit{cpufreq} драйвера под платформу эмулятора Gem5.
        \item Добавлена возможность измерения статистики микроархитектурных событий в Gem5
        (универсальных для любой архитектуры), относящихся к кешам, для возможности использования
        этой статистики в Linux c помощью драйвера \textit{perf}.
        \item Реализованы части API $devfreq$ для возможности регулирования
        тактовых частот прочих компонент системы Gem5 (при их поддержке технологии DVFS).
    \end{enumerate}

    Исследования и реализации, проведённые в данной работе, откроют возможность сторонним
    разработчикам/исследователям собирать данные микроархитектурных событий, связанных с кешами,
    для различных тактовых частот ядер ЦП, позволяя им проводить собственные исследования в области
    производительности ЦП.

\newpage
